{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}{{ event.name|default:"Triatlon Madre de Ciudades" }}{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'css/custom.css' %}">

  {% block extra_head %}{% endblock %}
</head>
<body class="d-flex flex-column min-vh-100">

<!-- ✅ NAVBAR con hamburguesa integrada -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
  <div class="container d-flex align-items-center justify-content-between">
    
    <!-- Botón Hamburguesa SIEMPRE visible -->
    <button class="navbar-toggler me-2" type="button" onclick="toggleSidebar()" aria-label="Abrir menú">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Logo y Marca -->
    <a class="navbar-brand d-flex align-items-center fw-bold" href="/">
      <img src="/media/img/tmc4-logo.png" alt="Logo" height="30" class="me-2">
      TMC
    </a>

    <!-- Menú normal (pantallas grandes) -->
    <div class="collapse navbar-collapse d-none d-lg-block">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'gallery' %}">Galería</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">Contactanos</a></li>
      </ul>
    </div>
  </div>
</nav>


<!-- ✅ Sidebar desplegable -->
<div id="sidebar" class="sidebar">
  <button class="close-btn" onclick="toggleSidebar()">×</button>
  <ul class="list-unstyled mt-4">
    <li><a href="/">Home</a></li>
    <li><a href="#">Races</a></li>
    <li><a href="#">News</a></li>
    <li><a href="#">Training</a></li>
    <li><a href="#">Community</a></li>
    <li><a href="#">Resources</a></li>
    <li><a href="#">About</a></li>
  </ul>
</div>

<!-- Overlay -->
<div id="overlay" class="overlay" onclick="toggleSidebar()"></div>

<!-- ✅ PAGE CONTENT -->
<main class="flex-grow-1">
  {% block content %}{% endblock %}
</main>

<!-- ✅ FOOTER (Sticky) -->
<footer class="bg-dark text-white text-center py-4 mt-auto">
  <div class="container">
    <p class="mb-1">© {{ event.name|default:"TMC 2025" }} {{ event.date.year|default:2025 }}</p>
    <p class="small">Website built with ❤️</p>
  </div>
</footer>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

{% block extra_js %}{% endblock %}
<script>
function toggleSidebar() {
  const sidebar = document.getElementById("sidebar");
  const overlay = document.getElementById("overlay");
  
  if (sidebar && overlay) {
    sidebar.classList.toggle("active");
    overlay.classList.toggle("active");
  } else {
    console.error("No se encontró el sidebar o el overlay");
  }
}
</script>

</body>
</html>
